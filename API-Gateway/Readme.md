# API's
## List of API's
### Manage Opinion
This API exposes the capabilities of manage the items the opinions made in the website

| Name  | Resource  | Description  |
|---|---|---|
| Create opinion  | /createopinion  | resource used to  store an opinion in the opinion table|
| Delete opinion  | /deleteopinion  | resource used to delete an opinion in the opinion table by the id of the opinion|
| Get opinion  | /getopinion  | resource used to retrieve an opinion in the opinion table by the id of the opinion|

***NOTE:***
The resources delete and get opinion although exist, are not used or invoked by the web page

#### Request Schema create opinion
```
{
    "region": "RegionName",
    "customerName": "Name",
    "customerOpinion": "Opinion",
    "messageIdentifier": "123456789"
}
```
#### Success response Schema create opinion
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request"
}
```
#### Request Schema delete opinion
```
{
    "region": "regionName",
    "id": "123456789"
}
```
#### Success response Schema delete opinion
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request"
}
```
#### Request Schema get opinion
For request of the get opinion resource, the id and the region need to be included in the query parameter
|Query parameter name|
|   ---    |
|region|
|id|
#### Success response Schema get opinion
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request",
    "data":{
            "CUSTOMER_OPINION": "Opinion",
            "CUSTOMER_NAME": "Name of the customer",
            "MESSAGE_IDENTIFIER": "Identifier"
            }
}
```
#### error response Schema
```
{
    "name": "name of the http error code",
    "message": "technical information about the error",
    "user_message": "friendly user message to be exposed to the user",
    "error":{
        "errorCode": "http code error",
        "TypeOfError": "if is an thecnical error or an error generated by the state of the user"
      }
    }
```

### BMI user management
This API expose the capabilities of creating deleting changing the user information such as the name password and email

| Name  | Resource  | Description  |
|---|---|---|
| Create user  | /createuser  | resource used to create a new user with an username - password - email|
| Delete user  | /deleteuser  | resource used to delete an user using the id of the user|
| GetUserInformation  | /getuserinformation  | resource used to retrieve the name - password and the email of an specific user|
| Validate Loggin  | /validateloggin  | resource used to determine if an username and password are valid|

#### Request Schema create user
```
{
      "region":"region of the table",
      "customerName": "name of the user",
      "customerPassword": "user password",
      "customerEmail": "user email",
      "customerIdentification": "user id"
    }
```
#### Success Response Schema create user
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request"
}
```

#### Request Schema delete user
```
{
      "region": "region of the table",
      "id": "user id"
}
```
#### Success Response Schema delete user
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request"
}
```

#### Request Schema GetUserInformation
For request of the get the user information, the region and the identifier need to be included in the query parameter

|Query parameter name|
|   ---    |
|region|
|id|

#### Request Schema get user by identifier
For request of the get user by username resource, the region need to be included in the query parameter

|Query parameter name|
|   ---    |
|region|

#### Success response Schema get user by identifier
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request",
    "data":{
            "username": "name of the customer",
            "email": "email of the customer",
            }
}
```

#### Request Schema Validate Loggin
```
{
      "region":"region of the table",
      "customerName": "name of the user",
      "customerPassword": "user password"
    }
```
#### Success Response Schema Validate Loggin
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request",
    "data": "user identifier"
}
```
#### error response Schema
```
{
    "name": "name of the http error code",
    "message": "technical information about the error",
    "user_message": "friendly user message to be exposed to the user",
    "error":{
        "errorCode": "http code error",
        "TypeOfError": "if is an thecnical error or an error generated by the state of the user"
      }
}
```
### BMI Data management
This API exposes the capabilities of updating or retrieving the user data related to the BMI

| Name  | Resource  | Description  |
|---|---|---|
| Update data  | /updatedata  | resource used to add and BMI entry|
| Retrieve data  | /getbmidata  | resource used to retrieve the user data related to the BMI|
| Delete BMI entry  | /deletebmidata  | resource used to delete an entry of the BMI data|

#### Request Schema update data
```
{
    "region": "region of the table",
    "id": "user identifier",
    "data": {
        weight: "weight",
        height: "height",
        date: "date",
        bmi: "calculatedBMI",
        id: "Identification of the entry"
    }
}
```
#### Success Response Schema update data
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request"
}
```

#### Request Schema retrieve data
For request of the retrieve data resource, the region and the user identifier need to be included in the query parameter

|Query parameter name|
|   ---    |
|region|
|id|

#### Success Response Schema retrieve data
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request",
    "data": [{
            weight: "weight",
            height: "height",
            date: "date",
            bmi: "calculatedBMI",
            id: "Identification of the entry"
        }]
}
```
#### Request Schema delete bmi data entry
```
{
    "region": "region of the table",
    "customerIdentification": "user identifier",
    "bmiDataIdentification": "identifier of the bmi data entry"
}
```
#### Success Response Schema delete bmi data entry
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request"
}
```

#### error response Schema
```
{
    "name": "name of the http error code",
    "message": "technical information about the error",
    "user_message": "friendly user message to be exposed to the user",
    "error":{
        "errorCode": "http code error",
        "TypeOfError": "if is an thecnical error or an error generated by the state of the user"
      }
}
```
### User Appointment Management
This API expose the capabilities of creating, deleting, updating and retrieving the user appointments

| Name  | Resource  | Description  |
|---|---|---|
| Delete Appointment  | /deleteappointment  | resource used to delete and appointment entry|
| Get Appointments  | /getappointments  | resource used to retrieve all the appointments of an user|
| Put Appointment  | /putappointment  | resource used to create a new appointment|
| Update Appointment  | /updateappointment  | resource used to update an existing appointment|

#### Request Schema Delete appointment
```
{
      "region":"region of the table",
      "id": "The user identifier",
      "Appointmentid": "The identifier of the appointment id"
    }
```
#### Success Response Schema Delete appointment
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request"
}
```

#### Request Schema Put Appointment
```
{
      "region": "region of the table",
      "id": "user id",
      "data":{
        "profession":"which is the proffession of the doctor who is going to be doing the examination",
        "date":"Date of the appointment format: YYYY-MM-DD",
        "time":"Time of the appointment format: hh:mm",
        "status":"If the appointment is scheduled or not",
        "direction":"Where is going to be the appointment",
        "description":"Other information of relevance",
        "identifier": "unique uuid identifier of the entry"
      }
}
```
#### Success Response Schema Put Appointment
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request"
}
```

#### Request Schema Get Appointments
For request of the get the user information, the region and the identifier need to be included in the query parameter

|Query parameter name|
|   ---    |
|region|
|id|

#### Success response Schema Get Appointments
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request",
    "data":[{
        "profession":"which is the proffession of the doctor who is going to be doing the examination",
        "date":"Date of the appointment format: YYYY-MM-DD",
        "time":"Time of the appointment format: hh:mm",
        "status":"If the appointment is scheduled or not",
        "direction":"Where is going to be the appointment",
        "description":"Other information of relevance",
        "identifier": "unique uuid identifier of the entry"
      }]
}
```

#### Request Schema Update Appointment
```
{
      "region":"region of the table",
      "id": "identifier of the user",
      "Appoitnment": {
        "profession":"which is the proffession of the doctor who is going to be doing the examination",
        "date":"Date of the appointment format: YYYY-MM-DD",
        "time":"Time of the appointment format: hh:mm",
        "status":"If the appointment is scheduled or not",
        "direction":"Where is going to be the appointment",
        "description":"Other information of relevance",
        "identifier": "unique uuid identifier of the entry"
        },
      "Appoitnmentid": "identifier of the new appointment entry"
    }
```
#### Success Response Schema Update Appointment
```
{
    "name": "name of the http response status",
    "code": "http code status",
    "message": "message indicating details of the request"
}
```
#### error response Schema
```
{
    "name": "name of the http error code",
    "message": "technical information about the error",
    "user_message": "friendly user message to be exposed to the user",
    "error":{
        "errorCode": "http code error",
        "TypeOfError": "if is an thecnical error or an error generated by the state of the user"
      }
}
```

## Security
The API's are currently exposed in a [regional API endpoint][1], so everyone can access and consumes the API's characteristics.
To limit firts who can consumes the API and second the how many request can be done by a single user, it is used [API keys][2] and [usage plans][3]

[1]:https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-api-endpoint-types.html
[2]:https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-setup-api-key-with-console.html
[3]:https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-api-usage-plans.html